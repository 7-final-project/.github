# ${\textsf{\color{orange} ğ—¤}}$ ì›ê²© ì¤„ì„œê¸° ì‹œìŠ¤í…œ : Qring
${\textsf{\color{#FF4500}íë§(Qring)}}$ì€ **Queue(ì¤„)** ì™€ **ring(ê³ ë¦¬)** ì˜ ê²°í•©ìœ¼ë¡œ, ì‚¬ëŒë“¤ì´ ê¸°ë‹¤ë¦¼ ì—†ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì¤„ì„ ì„œê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” **ì›ê²© ì¤„ì„œê¸° ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤. 
íë§ì€ ì—¬ëŸ¬ë¶„ê»˜ **ê¸°ë‹¤ë¦¼ ì—†ëŠ” ì¼ìƒ**ì„ ì œê³µí•©ë‹ˆë‹¤.

![7íŒ€_ë¸Œë¡œì…”ì´ë¯¸ì§€](https://github.com/user-attachments/assets/70f91b4c-d551-4b2b-88a0-3cce5c8a3d0f)

# ${\textsf{\color{orange} ğ—¤}}$ í”„ë¡œì íŠ¸ ê°œìš”
- ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ì²˜ë¦¬ ì›ê²© ëŒ€ê¸°ì—´ ì„œë¹„ìŠ¤
- ê°œë°œ ê¸°ê°„ | 2024.12.26 - 2024.01.26
- íŒ€ Notion | https://www.notion.so/teamsparta/7-1682dc3ef51480c3bd44d37ac4ad02f9
- ë°°í¬ ë§í¬ | 

# ${\textsf{\color{orange} ğ—¤}}$ í”„ë¡œì íŠ¸ ëª©í‘œ
ğŸ§ğŸ» **Kafkaë¥¼ í™œìš©í•œ ì•ˆì •ì  ëŒ€ê¸°ì—´ ì²˜ë¦¬**

- ëŒ€ê·œëª¨ íŠ¸ë˜í”½ í™˜ê²½ì—ì„œë„ Kafkaë¥¼ ì´ìš©í•´ ëŒ€ê¸°ì—´ì„ ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©°, ì‹œìŠ¤í…œì˜ í™•ì¥ì„±ê³¼ ì„±ëŠ¥ì„ ë³´ì¥í•©ë‹ˆë‹¤.

ğŸ§â€â™‚ï¸ **ë™ì‹œì„± ì´ìŠˆ í•´ê²°ì„ í†µí•œ ì•ˆì •ì  ì¿ í° ë°œê¸‰**

- ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì¿ í°ì„ ë°œê¸‰ë°›ë”ë¼ë„ ì¶©ëŒ ì—†ì´ ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë™ì‹œì„± ì´ìŠˆë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

ğŸ§ğŸ» **ì‹¤ì‹œê°„ ëŒ€ê¸°ì—´ ì¶”ì  ë° ì•Œë¦¼ ì „ì†¡**

- ëŒ€ê¸°ì—´ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•˜ë©°, ì‚¬ìš©ìì˜ ì°¨ë¡€ê°€ ë‹¤ê°€ì˜¤ë©´ ì¦‰ì‹œ ì•Œë¦¼ì„ ì „ì†¡í•˜ì—¬ í¸ë¦¬í•œ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

ğŸ§â€â™‚ï¸ **ELK ìŠ¤íƒì„ í™œìš©í•œ ë¡œê·¸ ê´€ë¦¬**

- ELK ìŠ¤íƒì„ í†µí•´ ë¡œê·¸ë¥¼ ê´€ë¦¬í•˜ê³ , ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì¶”ì ì„ í†µí•´ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.

# ${\textsf{\color{orange} ğ—¤}}$ ì¸í”„ë¼ ì„¤ê³„ë„
![á„á…²á„…á…µá†¼_á„‹á…µá†«á„‘á…³á„…á…¡_á„‰á…¥á†¯á„€á…¨á„ƒá…© drawio](https://github.com/user-attachments/assets/2d9ca5b3-3309-4122-8102-e9f8399c9b08)

# ${\textsf{\color{orange} ğ—¤}}$ ì£¼ìš” ê¸°ëŠ¥
### ğŸŒÂ ê²Œì´íŠ¸ì›¨ì´
- Passport í† í° ë°œê¸‰
    - ìœ ì € ì¸ì¦ ì‹œì— Passport ë¼ëŠ” id í† í°ì„ íŠ¸ëœì­ì…˜ ë‚´ë¡œ ì „íŒŒ
    - ìœ ì € ì •ë³´ê°€ í•„ìš”í•œ ì„œë¹„ìŠ¤ëŠ” ìœ ì € ì •ë³´ í˜¸ì¶œ ì—†ì´ Passport ì •ë³´ë¥¼ í†µí•˜ì—¬ ìœ ì €ì— ëŒ€í•œ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
    - **ì§§ì€ TTL ë¡œ ìºì‹œ ë° redis pub/sub ì„ í†µí•´ ìœ ì € ì •ë³´ ê°±ì‹  ìµœì í™”**
    - ì°¸ê³ ìë£Œ : https://toss.tech/article/slash23-server
- Global-Transaction-Id ë°œê¸‰ ë° ELK ìŠ¤íƒ í™˜ê²½ ë¡œê·¸ ê´€ë¦¬
    - ìœ ì € ìš”ì²­ ì‹œ ìµœì´ˆë¡œ **Global-Transaction-Id**ë¥¼ ë°œê¸‰í•˜ì—¬ ëª¨ë“  íŠ¸ë™ì­ì…˜ì— ì „íŒŒ
    - ì´í›„ ëª¨ë“  ìœ ì € ìš”ì²­ì€ **Global-Transaction-Id**ë¥¼ í¬í•¨í•˜ì—¬ ë°œì†¡ë˜ë©°, ì´ë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ì˜ íë¦„ì„ ì¶”ì í•  ìˆ˜ ìˆìŒ.
    - ELK ìŠ¤íƒì„ í™œìš©í•˜ì—¬ íŠ¸ëœì­ì…˜ ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘, ë¶„ì„, ì‹œê°í™”.

### ğŸ§ğŸ»Â ëŒ€ê¸°ì—´
- Redis ê¸°ë°˜ ì‹¤ì‹œê°„ ëŒ€ê¸°ì—´ ê´€ë¦¬
    - **Redis SortedSet**ì„ í™œìš©í•˜ì—¬ ì‹¤ì‹œê°„ ëŒ€ê¸° ìˆœë²ˆ ê´€ë¦¬ ë° ì¡°íšŒ ê°€ëŠ¥
    - Redis **KeySpaceNotification**ì„ ì‚¬ìš©í•˜ì—¬ ëŒ€ê¸°ì—´ ìƒíƒœ ë³€í™”ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•˜ê³  íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ íŠ¸ë¦¬ê±°.
    - ê° ì„œë²„ì— íŠ¹ì • ê°€ê²Œë¥¼ í• ë‹¹í•˜ì—¬ ëŒ€ê¸°ì—´ ë¶€í•˜ë¥¼ ë¶„ì‚°í•˜ê³ , ì‹¤ì‹œê°„ ëŒ€ê¸° ìƒíƒœë¥¼ ì¤‘ì•™ì—ì„œ ê´€ë¦¬.

### ğŸŸï¸Â ì¿ í°
- ë½ì„ í™œìš©í•œ ë™ì‹œì„± ì œì–´
    - ì¿ í° ë°œê¸‰ ì‹œ ë¹„ê´€ì ë½ ì ìš©
    - ë™ì‹œì„± í™•ë³´ë¥¼ í†µí•´ ì¿ í° ì¬ê³  ìˆ˜ëŸ‰ ì´ˆê³¼ ë°œê¸‰ ë°©ì§€
    - íŠ¸ëœì­ì…˜ ë¶„ë¦¬ë¥¼ í†µí•´ ë½ ë²”ìœ„ ìµœì†Œí™”
      `@Transactional(propagation = Propagation.*REQUIRED*)`

### ğŸ´ì‹ë‹¹
- ìš´ì˜ ì‹œê°„ ê¸°ë°˜ ìë™ ìƒíƒœ ì—…ë°ì´íŠ¸
    - ì‚¬ìš©ìê°€ ì‹ë‹¹ì„ ìƒì„±í•  ë•Œ ìš´ì˜ ì‹œê°„ì„ í•¨ê»˜ ì„¤ì • ê°€ëŠ¥.
    - **TaskScheduler**ë¥¼ í™œìš©í•˜ì—¬ ì„¤ì •ëœ ìš´ì˜ ìš”ì¼ ë° ì‹œê°„ì— ë”°ë¼ ì‹ë‹¹ì˜ ìƒíƒœë¥¼ `OPEN` ë˜ëŠ” `CLOSED`ë¡œ ìë™ ë³€ê²½.
    - ìš´ì˜ ìƒíƒœ ë³€ê²½ ìŠ¤ì¼€ì¤„ë§ì€ `OperationStatusScheduler`ë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ ê´€ë¦¬.
- ì‹¤ì‹œê°„ í‰ì  ê³„ì‚° ë° í†µê³„ ê´€ë¦¬
    - Kafka ë©”ì‹œì§€ë¥¼ ì†Œë¹„í•˜ì—¬ ë¦¬ë·° ì´ë²¤íŠ¸(`CREATE`, `UPDATE`, `DELETE`)ì— ë”°ë¼ `reviewCount`ì™€ `totalRating`ì„ ì—…ë°ì´íŠ¸.
    - ì¡°íšŒ ì‹œì ì— `reviewCount`ì™€ `totalRating`ì„ ê¸°ë°˜ìœ¼ë¡œ í‰ê·  í‰ì (`averageRating`)ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì‚°í•˜ì—¬ ë°˜í™˜.

### ğŸ“ ë¦¬ë·°
- Kafka ê¸°ë°˜ ì´ë²¤íŠ¸ ë°œí–‰
    - ë¦¬ë·° ìƒì„±, ìˆ˜ì •, ì‚­ì œ ì‹œ ì´ë²¤íŠ¸ë¥¼ Kafka ë©”ì‹œì§€ë¡œ ë°œí–‰í•˜ì—¬ ì‹ë‹¹ ì„œë¹„ìŠ¤ê°€ ì´ë¥¼ ì†Œë¹„í•˜ê³  í†µê³„ë¥¼ ê´€ë¦¬.
    - ë©”ì‹œì§€ êµ¬ì¡°ë¥¼ ê°„ì†Œí™”í•˜ì—¬ `restaurantId`, `rating`, `eventType(CREATE, UPDATE, DELETE)`ë§Œ í¬í•¨.
- ì˜ˆì•½ ì •ë³´ì™€ ì‹ë‹¹ ì •ë³´ ê²€ì¦
    - Feign Clientë¥¼ í™œìš©í•˜ì—¬ ë¦¬ë·° ì‘ì„± ì „ ì˜ˆì•½ ì •ë³´ì™€ ì‹ë‹¹ ì •ë³´ë¥¼ ê²€ì¦.
    - ì˜ˆì•½ ìƒíƒœì™€ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ì˜ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ë°ì´í„°ì˜ ì‹ ë¢°ì„±ì„ í™•ë³´.

# ${\textsf{\color{orange} ğ—¤}}$ ì ìš© ê¸°ìˆ  
### í”„ë ˆì„ì›Œí¬ / ë¼ì´ë¸ŒëŸ¬ë¦¬
![JDK 17](https://img.shields.io/badge/JDK-17-007396?style=flat-square&logo=java&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.1-6DB33F?style=flat-square&logo=springboot&logoColor=white)
![Eureka](https://img.shields.io/badge/Eureka-6DB33F?style=flat-square&logo=spring&logoColor=white)
![OpenFeign](https://img.shields.io/badge/OpenFeign-6DB33F?style=flat-square&logo=spring&logoColor=white)
![Spring Cloud Gateway](https://img.shields.io/badge/Spring%20Cloud%20Gateway-6DB33F?style=flat-square&logo=spring&logoColor=white)
![Redisson](https://img.shields.io/badge/Redisson-DC382D?style=flat-square&logo=redis&logoColor=white)
![QueryDSL](https://img.shields.io/badge/QueryDSL-5.0.0-6DB33F?style=flat-square&logo=spring&logoColor=white)
![Spring Data JPA](https://img.shields.io/badge/Spring%20Data%20JPA-6DB33F?style=flat-square&logo=spring&logoColor=white)

### ë©”ì‹œì§•
![Apache Kafka](https://img.shields.io/badge/Apache%20Kafka-231F20?style=flat-square&logo=apachekafka&logoColor=white)

### ë°ì´í„°ë² ì´ìŠ¤
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16.4-336791?style=flat-square&logo=postgresql&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=flat-square&logo=redis&logoColor=white)

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
![Apache JMeter](https://img.shields.io/badge/Apache%20JMeter-D22128?style=flat-square&logo=apache&logoColor=white)

### ì™¸ë¶€ ì—°ë™
![Slack](https://img.shields.io/badge/Slack-4A154B?style=flat-square&logo=slack&logoColor=white)

### ì¸í”„ë¼
![Docker](https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=docker&logoColor=white)
![Docker Compose](https://img.shields.io/badge/Docker%20Compose-2496ED?style=flat-square&logo=docker&logoColor=white)
![GitHub Actions](https://img.shields.io/badge/GitHub%20Actions-2088FF?style=flat-square&logo=githubactions&logoColor=white)
![Jenkins](https://img.shields.io/badge/Jenkins-D24939?style=flat-square&logo=jenkins&logoColor=white)
![AWS EC2](https://img.shields.io/badge/AWS%20EC2-FF9900?style=flat-square&logo=amazonaws&logoColor=white)
![Ubuntu](https://img.shields.io/badge/Ubuntu-E95420?style=flat-square&logo=ubuntu&logoColor=white)

### í˜‘ì—… íˆ´
![GitHub](https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=github&logoColor=white)
![Slack](https://img.shields.io/badge/Slack-4A154B?style=flat-square&logo=slack&logoColor=white)
![Notion](https://img.shields.io/badge/Notion-000000?style=flat-square&logo=notion&logoColor=white)

# ${\textsf{\color{orange} ğ—¤}}$ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •


# ${\textsf{\color{orange} ğ—¤}}$ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…


# ğŸ“Š ì„œë¹„ìŠ¤ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
| ì„œë¹„ìŠ¤ ì´ë¦„         | ìƒíƒœ                                                                                  |
|---------------------|---------------------------------------------------------------------------------------|
| ğŸš€ **Server**       | ![example workflow](https://github.com/7-final-project/server/actions/workflows/gradle.yml/badge.svg) |
| ğŸ”‘ **Auth**         | ![example workflow](https://github.com/7-final-project/auth/actions/workflows/gradle.yml/badge.svg)   |
| ğŸŒ **Gateway**      | ![example workflow](https://github.com/7-final-project/gateway/actions/workflows/gradle.yml/badge.svg) |
| ğŸŸï¸ **Coupon**      | ![example workflow](https://github.com/7-final-project/coupon/actions/workflows/gradle.yml/badge.svg) |
| ğŸ“… **Reservation**  | ![example workflow](https://github.com/7-final-project/reservation/actions/workflows/gradle.yml/badge.svg) |
| â³ **Queue**        | ![example workflow](https://github.com/7-final-project/queue/actions/workflows/gradle.yml/badge.svg)  |
| ğŸ½ï¸ **Restaurant**  | ![example workflow](https://github.com/7-final-project/restaurant/actions/workflows/gradle.yml/badge.svg) |
| â­ **Review**        | ![example workflow](https://github.com/7-final-project/review/actions/workflows/gradle.yml/badge.svg) |
| ğŸ’¬ **Message**      | ![example workflow](https://github.com/7-final-project/message/actions/workflows/gradle.yml/badge.svg) |
